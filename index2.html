<!DOCTYPE html>
<html>
	<head>
		<script>
			const pc = new RTCPeerConnection({
				iceServers: [
					{
						urls: 'stun:stun.l.google.com:19302'
					}
				]
			});

			const socket = new WebSocket('wss://34-220-94-79.lachlanb.me:8080');
			
			socket.addEventListener('message', function (message) {
				
				var event = JSON.parse(message.data);
				console.log(event);
				
				pc.setRemoteDescription(event.directive.payload.offer).then(() => {
					return pc.createAnswer();
				}).then(() => {
					return pc.setLocalDescription()
				}).then(() => {
					socket.send(JSON.stringify({
						sdp: pc.localDescription
					}));
				});
			});
			
			
		</script>
	</head>
	<body>
	</body>
</html>
